{"ast":null,"code":"var _jsxFileName = \"/Users/me/Downloads/Projects/chatbot-lemonade/src/components/Chat/Chat.js\";\nimport React, { useState, useEffect } from 'react';\nimport useSessionStorage from '../../utils/useSessionStorage';\nimport { BOT_STEPS, NEXT_STEP } from '../../consts/chatConsts';\nimport { getStepDetails } from '../../utils/chatUtils';\nimport ChatHeader from '../ChatHeader/ChatHeader';\nimport ChatFooter from '../ChatFooter/ChatFooter';\nimport ChatContent from '../ChatContent/ChatContent';\nimport './Chat.css';\n\nconst Chat = () => {\n  const [name, setName] = useSessionStorage('name', '');\n  const [expression, setExpression] = useState('');\n  const [isPending, setIsPending] = useState(false);\n  const [step, setStep] = useState(name ? BOT_STEPS.NICE_TO_SEE : BOT_STEPS.INTRO);\n  const [step2, setStep2] = useState(name ? 2 : 1); //intro, hello again, expression\n\n  const [messages, setMessages] = useState([]);\n  useEffect(() => {\n    const stepDetails = getStepDetails(step, name, expression); //   debugger\n\n    if (!(stepDetails === null || stepDetails === void 0 ? void 0 : stepDetails.isUserInput)) {\n      setTimeout(() => {\n        const nextStep = NEXT_STEP[step]; //    debugger\n\n        setStep(() => nextStep);\n        setIsPending(() => false);\n        setMessages([...messages, stepDetails]);\n      }, 1000);\n    }\n  }, [messages]);\n\n  const sendMessageHandler = newMessage => {\n    if (!isPending) {\n      //add the user input to the screen and ignore\n      //setMessages([...messages, {message: newMessage, isUserInput: true}])\n      setIsPending(true);\n      const next = step2 === 1 ? 2 : 2;\n      setStep2(next);\n    }\n\n    setMessages([...messages, {\n      message: newMessage,\n      isUserInput: true\n    }]); //const nextStep =  NEXT_STEP[step]\n\n    /*if (step === BOT_STEPS.GET_NAME) {\n        setName(newMessage)\n        setStep(nextStep)\n        setIsPending(true)\n    } else if (step === BOT_STEPS.GET_MATH_EXPRESSION) {\n        setExpression(newMessage)\n        setStep(nextStep)\n        setIsPending(true)\n    }\n     setMessages([...messages, {message: newMessage, isUserInput: true}])   */\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chat-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ChatHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(ChatContent, {\n    messages: messages,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(ChatFooter, {\n    onSend: sendMessageHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }));\n};\n\nexport default Chat;","map":{"version":3,"sources":["/Users/me/Downloads/Projects/chatbot-lemonade/src/components/Chat/Chat.js"],"names":["React","useState","useEffect","useSessionStorage","BOT_STEPS","NEXT_STEP","getStepDetails","ChatHeader","ChatFooter","ChatContent","Chat","name","setName","expression","setExpression","isPending","setIsPending","step","setStep","NICE_TO_SEE","INTRO","step2","setStep2","messages","setMessages","stepDetails","isUserInput","setTimeout","nextStep","sendMessageHandler","newMessage","next","message"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,iBAAP,MAA8B,+BAA9B;AACA,SAASC,SAAT,EAAoBC,SAApB,QAAsC,yBAAtC;AACA,SAASC,cAAT,QAA+B,uBAA/B;AACA,OAAOC,UAAP,MAAuB,0BAAvB;AACA,OAAOC,UAAP,MAAuB,0BAAvB;AACA,OAAOC,WAAP,MAAwB,4BAAxB;AAEA,OAAO,YAAP;;AAGA,MAAMC,IAAI,GAAG,MAAM;AACf,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBT,iBAAiB,CAAC,MAAD,EAAS,EAAT,CAAzC;AACA,QAAM,CAACU,UAAD,EAAaC,aAAb,IAA8Bb,QAAQ,CAAC,EAAD,CAA5C;AACA,QAAM,CAACc,SAAD,EAAYC,YAAZ,IAA4Bf,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM,CAACgB,IAAD,EAAOC,OAAP,IAAkBjB,QAAQ,CAACU,IAAI,GAAGP,SAAS,CAACe,WAAb,GAA2Bf,SAAS,CAACgB,KAA1C,CAAhC;AACA,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBrB,QAAQ,CAACU,IAAI,GAAG,CAAH,GAAO,CAAZ,CAAlC,CALe,CAKkC;;AACjD,QAAM,CAACY,QAAD,EAAWC,WAAX,IAA0BvB,QAAQ,CAAC,EAAD,CAAxC;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMuB,WAAW,GAAGnB,cAAc,CAACW,IAAD,EAAON,IAAP,EAAaE,UAAb,CAAlC,CADc,CAEf;;AACC,QAAI,EAACY,WAAD,aAACA,WAAD,uBAACA,WAAW,CAAEC,WAAd,CAAJ,EAA+B;AAC3BC,MAAAA,UAAU,CAAC,MAAM;AACf,cAAMC,QAAQ,GAAGvB,SAAS,CAACY,IAAD,CAA1B,CADe,CAEnB;;AACMC,QAAAA,OAAO,CAAC,MAAMU,QAAP,CAAP;AACAZ,QAAAA,YAAY,CAAC,MAAM,KAAP,CAAZ;AACAQ,QAAAA,WAAW,CAAC,CAAC,GAAGD,QAAJ,EAAcE,WAAd,CAAD,CAAX;AACD,OANO,EAML,IANK,CAAV;AAOD;AAEF,GAbM,EAaJ,CAACF,QAAD,CAbI,CAAT;;AAeA,QAAMM,kBAAkB,GAAIC,UAAD,IAAgB;AAEvC,QAAG,CAACf,SAAJ,EAAc;AACV;AACA;AACAC,MAAAA,YAAY,CAAC,IAAD,CAAZ;AACA,YAAMe,IAAI,GAAGV,KAAK,KAAK,CAAV,GAAc,CAAd,GAAkB,CAA/B;AACAC,MAAAA,QAAQ,CAACS,IAAD,CAAR;AACH;;AACDP,IAAAA,WAAW,CAAC,CAAC,GAAGD,QAAJ,EAAc;AAACS,MAAAA,OAAO,EAAEF,UAAV;AAAsBJ,MAAAA,WAAW,EAAE;AAAnC,KAAd,CAAD,CAAX,CATuC,CAYvC;;AACA;;;;;;;;;;AAWH,GAxBD;;AA0BF,sBACE;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,eAEI,oBAAC,WAAD;AAAa,IAAA,QAAQ,EAAEH,QAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,eAGI,oBAAC,UAAD;AAAY,IAAA,MAAM,EAAEM,kBAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHJ,CADF;AAOD,CAxDD;;AA0DA,eAAenB,IAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport useSessionStorage from '../../utils/useSessionStorage'\nimport { BOT_STEPS, NEXT_STEP }  from '../../consts/chatConsts'\nimport { getStepDetails } from '../../utils/chatUtils';\nimport ChatHeader from '../ChatHeader/ChatHeader'\nimport ChatFooter from '../ChatFooter/ChatFooter';\nimport ChatContent from '../ChatContent/ChatContent';\n\nimport './Chat.css';\n\n\nconst Chat = () => {\n    const [name, setName] = useSessionStorage('name', '')\n    const [expression, setExpression] = useState('')\n    const [isPending, setIsPending] = useState(false)\n    const [step, setStep] = useState(name ? BOT_STEPS.NICE_TO_SEE : BOT_STEPS.INTRO)\n    const [step2, setStep2] = useState(name ? 2 : 1) //intro, hello again, expression\n    const [messages, setMessages] = useState([])\n\n    useEffect(() => {\n      const stepDetails = getStepDetails(step, name, expression)\n     //   debugger\n      if (!stepDetails?.isUserInput) { \n          setTimeout(() => {\n            const nextStep = NEXT_STEP[step]\n        //    debugger\n              setStep(() => nextStep)\n              setIsPending(() => false)\n              setMessages([...messages, stepDetails])\n            }, 1000)\n        }\n       \n      }, [messages])\n\n    const sendMessageHandler = (newMessage) => {\n\n        if(!isPending){\n            //add the user input to the screen and ignore\n            //setMessages([...messages, {message: newMessage, isUserInput: true}])\n            setIsPending(true)\n            const next = step2 === 1 ? 2 : 2\n            setStep2(next)\n        }\n        setMessages([...messages, {message: newMessage, isUserInput: true}])\n        \n\n        //const nextStep =  NEXT_STEP[step]\n        /*if (step === BOT_STEPS.GET_NAME) {\n            setName(newMessage)\n            setStep(nextStep)\n            setIsPending(true)\n        } else if (step === BOT_STEPS.GET_MATH_EXPRESSION) {\n            setExpression(newMessage)\n            setStep(nextStep)\n            setIsPending(true)\n        }\n\n        setMessages([...messages, {message: newMessage, isUserInput: true}])   */  \n    }\n\n  return (\n    <div className=\"chat-container\">\n        <ChatHeader/>\n        <ChatContent messages={messages}/>\n        <ChatFooter onSend={sendMessageHandler}/>\n    </div>\n  );\n}\n\nexport default Chat;\n"]},"metadata":{},"sourceType":"module"}