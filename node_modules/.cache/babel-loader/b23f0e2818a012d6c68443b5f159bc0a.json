{"ast":null,"code":"var _jsxFileName = \"/Users/me/Downloads/Projects/chatbot-lemonade/src/components/Chat/Chat.js\";\nimport React, { useState, useEffect } from 'react';\nimport useSessionStorage from '../../utils/useSessionStorage';\nimport { BOT_STEPS, NEXT_STEP } from '../../consts/chatConsts';\nimport { getStepDetails, calculateMathExpression } from '../../utils/chatUtils';\nimport ChatHeader from '../ChatHeader/ChatHeader';\nimport ChatFooter from '../ChatFooter/ChatFooter';\nimport ChatContent from '../ChatContent/ChatContent';\nimport './Chat.css';\n\nconst Chat = () => {\n  const [name, setName] = useSessionStorage('name', ''); // const [expression, setExpression] = useState('')\n\n  const [isPending, setIsPending] = useState(false);\n  const [step, setStep] = useState(name ? BOT_STEPS.NICE_TO_SEE : BOT_STEPS.INTRO);\n  const [isBot, setIsBot] = useState(true); //user true, bot false\n\n  const [messages, setMessages] = useState([]); // useEffect(() => {\n  //   /*const stepDetails = getStepDetails(step, name, expression)\n  //  //   debugger\n  //   if (!stepDetails?.isUserInput) { \n  //       setTimeout(() => {\n  //         const nextStep = NEXT_STEP[step]\n  //     //    debugger\n  //           setStep(() => nextStep)\n  //           setIsPending(() => false)\n  //           setMessages([...messages, stepDetails])\n  //         }, 1000)\n  //     }*/\n  //   }, [messages])\n\n  useEffect(() => {\n    if (name) {\n      setMessages([...BOT_STEPS.NICE_TO_SEE(name), ...BOT_STEPS.DESCRIBE_PROCESS()]);\n    } else {\n      setMessages(BOT_STEPS.INTRO());\n    }\n\n    setIsBot(false); // setIsPending(true)\n  }, []);\n\n  const sendMessageHandler = newMessage => {\n    if (!isBot) {\n      setIsBot(false);\n\n      if (!name) {\n        setMessages([...messages, {\n          message: newMessage,\n          isUserInput: true\n        }, ...BOT_STEPS.NICE_TO_MEET(name), ...BOT_STEPS.DESCRIBE_PROCESS()]);\n      } else {\n        //expression\n        setMessages([...messages, {\n          message: newMessage,\n          isUserInput: true\n        }, {\n          message: calculateMathExpression(newMessage)\n        }, ...BOT_STEPS.BOT_FEEDBACK()]);\n      }\n\n      return;\n    }\n\n    setMessages([...messages, {\n      message: newMessage,\n      isUserInput: true\n    }]); //const nextStep =  NEXT_STEP[step]\n\n    /*if (step === BOT_STEPS.GET_NAME) {\n        setName(newMessage)\n        setStep(nextStep)\n        setIsPending(true)\n    } else if (step === BOT_STEPS.GET_MATH_EXPRESSION) {\n        setExpression(newMessage)\n        setStep(nextStep)\n        setIsPending(true)\n    }\n     setMessages([...messages, {message: newMessage, isUserInput: true}])   */\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chat-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ChatHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(ChatContent, {\n    messages: messages,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(ChatFooter, {\n    onSend: sendMessageHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }\n  }));\n};\n\nexport default Chat;","map":{"version":3,"sources":["/Users/me/Downloads/Projects/chatbot-lemonade/src/components/Chat/Chat.js"],"names":["React","useState","useEffect","useSessionStorage","BOT_STEPS","NEXT_STEP","getStepDetails","calculateMathExpression","ChatHeader","ChatFooter","ChatContent","Chat","name","setName","isPending","setIsPending","step","setStep","NICE_TO_SEE","INTRO","isBot","setIsBot","messages","setMessages","DESCRIBE_PROCESS","sendMessageHandler","newMessage","message","isUserInput","NICE_TO_MEET","BOT_FEEDBACK"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport useSessionStorage from '../../utils/useSessionStorage'\nimport { BOT_STEPS, NEXT_STEP }  from '../../consts/chatConsts'\nimport { getStepDetails, calculateMathExpression } from '../../utils/chatUtils';\nimport ChatHeader from '../ChatHeader/ChatHeader'\nimport ChatFooter from '../ChatFooter/ChatFooter';\nimport ChatContent from '../ChatContent/ChatContent';\n\nimport './Chat.css';\n\n\nconst Chat = () => {\n    const [name, setName] = useSessionStorage('name', '')\n   // const [expression, setExpression] = useState('')\n    const [isPending, setIsPending] = useState(false)\n    const [step, setStep] = useState(name ? BOT_STEPS.NICE_TO_SEE : BOT_STEPS.INTRO)\n    const [isBot, setIsBot] = useState(true) //user true, bot false\n    const [messages, setMessages] = useState([])\n\n    // useEffect(() => {\n    //   /*const stepDetails = getStepDetails(step, name, expression)\n    //  //   debugger\n    //   if (!stepDetails?.isUserInput) { \n    //       setTimeout(() => {\n    //         const nextStep = NEXT_STEP[step]\n    //     //    debugger\n    //           setStep(() => nextStep)\n    //           setIsPending(() => false)\n    //           setMessages([...messages, stepDetails])\n    //         }, 1000)\n    //     }*/\n\n\n       \n    //   }, [messages])\n\n    useEffect(()=>{\n        if (name) {\n            setMessages([...BOT_STEPS.NICE_TO_SEE(name), ...BOT_STEPS.DESCRIBE_PROCESS()]) \n        }\n        else {\n            setMessages(BOT_STEPS.INTRO())\n        }\n\n        setIsBot(false)\n       // setIsPending(true)\n    }, [])\n\n\n    const sendMessageHandler = (newMessage) => {\n        if(!isBot){   \n            setIsBot(false)\n            \n            if(!name){\n                setMessages([...messages, \n                            { message: newMessage, isUserInput: true },\n                            ...BOT_STEPS.NICE_TO_MEET(name), \n                            ...BOT_STEPS.DESCRIBE_PROCESS()])\n            }\n            else {\n                //expression\n\n                setMessages([...messages, \n                            { message: newMessage, isUserInput: true },\n                            { message: calculateMathExpression(newMessage) }, \n                            ...BOT_STEPS.BOT_FEEDBACK()])\n            }\n\n           return\n        }\n        \n        setMessages([...messages, { message: newMessage, isUserInput: true }])\n        \n\n        //const nextStep =  NEXT_STEP[step]\n        /*if (step === BOT_STEPS.GET_NAME) {\n            setName(newMessage)\n            setStep(nextStep)\n            setIsPending(true)\n        } else if (step === BOT_STEPS.GET_MATH_EXPRESSION) {\n            setExpression(newMessage)\n            setStep(nextStep)\n            setIsPending(true)\n        }\n\n        setMessages([...messages, {message: newMessage, isUserInput: true}])   */  \n    }\n\n  return (\n    <div className=\"chat-container\">\n        <ChatHeader/>\n        <ChatContent messages={messages}/>\n        <ChatFooter onSend={sendMessageHandler}/>\n    </div>\n  );\n}\n\nexport default Chat;\n"]},"metadata":{},"sourceType":"module"}