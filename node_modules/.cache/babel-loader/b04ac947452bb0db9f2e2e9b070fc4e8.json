{"ast":null,"code":"var _jsxFileName = \"/Users/me/Downloads/Projects/chatbot-lemonade/src/components/Chat/Chat.js\";\nimport React, { useState, useEffect } from 'react';\nimport useSessionStorage from '../../utils/useSessionStorage';\nimport { BOT_STEPS, NEXT_STEP } from '../../consts/chatConsts';\nimport { getStepDetails } from '../../utils/chatUtils';\nimport ChatHeader from '../ChatHeader/ChatHeader';\nimport ChatFooter from '../ChatFooter/ChatFooter';\nimport ChatContent from '../ChatContent/ChatContent';\nimport './Chat.css';\n\nconst Chat = () => {\n  const [name, setName] = useSessionStorage('name', '');\n  const [expression, setExpression] = useState(''); // const [step, setStep] = useState(name ? BOT_STEPS.NICE_TO_SEE : BOT_STEPS.INTRO)\n  // const [messages, setMessages] = useState([])\n\n  const [data, setData] = useState({\n    step: name ? BOT_STEPS.NICE_TO_SEE : BOT_STEPS.INTRO,\n    messages: []\n  });\n  console.log(data.messages);\n  useEffect(() => {\n    const stepDetails = getStepDetails(data.step, name, expression); //   debugger\n\n    if (!(stepDetails === null || stepDetails === void 0 ? void 0 : stepDetails.isUserInput)) {\n      setTimeout(() => {\n        const nextStep = NEXT_STEP[data.step]; //    debugger\n\n        setData({\n          step: nextStep,\n          messages: [...data.messages, stepDetails]\n        }); //   setStep(nextStep)\n        //   setMessages([...data.messages, stepDetails])\n      }, 500);\n    }\n  }, [data, name, expression]); // const sendMessageHandler = (newMessage) => {\n  //     const nextStep =  NEXT_STEP[data.step]\n  //     if (data.step === BOT_STEPS.GET_NAME) {\n  //         setName(newMessage)\n  //        // setStep(nextStep)\n  //        setData({step: nextStep, messages: [...data.messages, {message: newMessage, isUserInput: true}]})\n  //     } else if (data.step === BOT_STEPS.GET_MATH_EXPRESSION) {\n  //         setExpression(newMessage)\n  //        // setStep(nextStep)\n  //         setData({step: nextStep, messages: [...data.messages, {message: newMessage, isUserInput: true}]})\n  //     } else {\n  //         setData({step: data.step, messages: [...data.messages, {message: newMessage, isUserInput: true}]})\n  //         // setStep(data.step)\n  //         // setMessages([...data.messages, {message: newMessage, isUserInput: true}])   \n  //     }     \n  // }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chat-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ChatHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(ChatContent, {\n    messages: data.messages,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(ChatFooter, {\n    onSend: () => {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }\n  }));\n};\n\nexport default Chat;","map":{"version":3,"sources":["/Users/me/Downloads/Projects/chatbot-lemonade/src/components/Chat/Chat.js"],"names":["React","useState","useEffect","useSessionStorage","BOT_STEPS","NEXT_STEP","getStepDetails","ChatHeader","ChatFooter","ChatContent","Chat","name","setName","expression","setExpression","data","setData","step","NICE_TO_SEE","INTRO","messages","console","log","stepDetails","isUserInput","setTimeout","nextStep"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,iBAAP,MAA8B,+BAA9B;AACA,SAASC,SAAT,EAAoBC,SAApB,QAAsC,yBAAtC;AACA,SAASC,cAAT,QAA+B,uBAA/B;AACA,OAAOC,UAAP,MAAuB,0BAAvB;AACA,OAAOC,UAAP,MAAuB,0BAAvB;AACA,OAAOC,WAAP,MAAwB,4BAAxB;AAEA,OAAO,YAAP;;AAGA,MAAMC,IAAI,GAAG,MAAM;AACf,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBT,iBAAiB,CAAC,MAAD,EAAS,EAAT,CAAzC;AACA,QAAM,CAACU,UAAD,EAAaC,aAAb,IAA8Bb,QAAQ,CAAC,EAAD,CAA5C,CAFe,CAGf;AACA;;AAEA,QAAM,CAACc,IAAD,EAAOC,OAAP,IAAkBf,QAAQ,CAAC;AAACgB,IAAAA,IAAI,EAAEN,IAAI,GAAGP,SAAS,CAACc,WAAb,GAA2Bd,SAAS,CAACe,KAAhD;AAAuDC,IAAAA,QAAQ,EAAE;AAAjE,GAAD,CAAhC;AACJC,EAAAA,OAAO,CAACC,GAAR,CAAYP,IAAI,CAACK,QAAjB;AACIlB,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMqB,WAAW,GAAGjB,cAAc,CAACS,IAAI,CAACE,IAAN,EAAYN,IAAZ,EAAkBE,UAAlB,CAAlC,CADc,CAEf;;AACC,QAAI,EAACU,WAAD,aAACA,WAAD,uBAACA,WAAW,CAAEC,WAAd,CAAJ,EAA+B;AAC3BC,MAAAA,UAAU,CAAC,MAAM;AACf,cAAMC,QAAQ,GAAGrB,SAAS,CAACU,IAAI,CAACE,IAAN,CAA1B,CADe,CAEnB;;AACAD,QAAAA,OAAO,CAAC;AAACC,UAAAA,IAAI,EAAES,QAAP;AAAiBN,UAAAA,QAAQ,EAAE,CAAC,GAAGL,IAAI,CAACK,QAAT,EAAmBG,WAAnB;AAA3B,SAAD,CAAP,CAHmB,CAIf;AACA;AACC,OANO,EAML,GANK,CAAV;AAOD;AAEF,GAbM,EAaL,CAACR,IAAD,EAAMJ,IAAN,EAAWE,UAAX,CAbK,CAAT,CARe,CAuBf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEF,sBACE;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,eAEI,oBAAC,WAAD;AAAa,IAAA,QAAQ,EAAEE,IAAI,CAACK,QAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,eAGI,oBAAC,UAAD;AAAY,IAAA,MAAM,EAAE,MAAI,CAAE,CAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHJ,CADF;AAOD,CA/CD;;AAiDA,eAAeV,IAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport useSessionStorage from '../../utils/useSessionStorage'\nimport { BOT_STEPS, NEXT_STEP }  from '../../consts/chatConsts'\nimport { getStepDetails } from '../../utils/chatUtils';\nimport ChatHeader from '../ChatHeader/ChatHeader'\nimport ChatFooter from '../ChatFooter/ChatFooter';\nimport ChatContent from '../ChatContent/ChatContent';\n\nimport './Chat.css';\n\n\nconst Chat = () => {\n    const [name, setName] = useSessionStorage('name', '')\n    const [expression, setExpression] = useState('')\n    // const [step, setStep] = useState(name ? BOT_STEPS.NICE_TO_SEE : BOT_STEPS.INTRO)\n    // const [messages, setMessages] = useState([])\n\n    const [data, setData] = useState({step: name ? BOT_STEPS.NICE_TO_SEE : BOT_STEPS.INTRO, messages: []})\nconsole.log(data.messages)\n    useEffect(() => {\n      const stepDetails = getStepDetails(data.step, name, expression)\n     //   debugger\n      if (!stepDetails?.isUserInput) { \n          setTimeout(() => {\n            const nextStep = NEXT_STEP[data.step]\n        //    debugger\n        setData({step: nextStep, messages: [...data.messages, stepDetails]})\n            //   setStep(nextStep)\n            //   setMessages([...data.messages, stepDetails])\n            }, 500)\n        }\n       \n      },[data,name,expression])\n\n    // const sendMessageHandler = (newMessage) => {\n    //     const nextStep =  NEXT_STEP[data.step]\n    //     if (data.step === BOT_STEPS.GET_NAME) {\n    //         setName(newMessage)\n    //        // setStep(nextStep)\n    //        setData({step: nextStep, messages: [...data.messages, {message: newMessage, isUserInput: true}]})\n    //     } else if (data.step === BOT_STEPS.GET_MATH_EXPRESSION) {\n    //         setExpression(newMessage)\n    //        // setStep(nextStep)\n    //         setData({step: nextStep, messages: [...data.messages, {message: newMessage, isUserInput: true}]})\n    //     } else {\n    //         setData({step: data.step, messages: [...data.messages, {message: newMessage, isUserInput: true}]})\n    //         // setStep(data.step)\n    //         // setMessages([...data.messages, {message: newMessage, isUserInput: true}])   \n    //     }     \n    // }\n\n  return (\n    <div className=\"chat-container\">\n        <ChatHeader/>\n        <ChatContent messages={data.messages}/>\n        <ChatFooter onSend={()=>{}}/>\n    </div>\n  );\n}\n\nexport default Chat;\n"]},"metadata":{},"sourceType":"module"}